apiVersion: v1
kind: ConfigMap
metadata:
  name: notifications-cm
  namespace: argocd
data:
  notifications.yaml: |
    triggers:
      on-sync-succeeded:
        condition: app.status.sync.status == 'Synced'
        template: send-email
    templates:
      send-email:
        body: |
          Application {{ .app.metadata.name }} has been successfully synced!
        title: Application Sync Notification
        recipients:
          - recipient@example.com  # Remplacez par votre adresse e-mail
        smtp:
          host: smtp.gmail.com
          port: 587
          user: <YOUR_SMTP_USER>  # Votre adresse e-mail
          password: <YOUR_SMTP_PASSWORD>  # Votre mot de passe
